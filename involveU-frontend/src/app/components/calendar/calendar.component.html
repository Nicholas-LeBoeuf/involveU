<ng-container *ngIf="isLoggedIn === false; else UserIsLoggedIn">
  <h1 class="text-center">You must be <b>Logged In</b> to view this page!</h1>
</ng-container>

<ng-template #UserIsLoggedIn>
  <div class="filterFlex">
   <!-- Filter button deprecated as of right now-->
    <!--<button class="yellowButton removeMargin" (click)="openViewFilterDialog()">Filters</button>-->
    <button class="yellowButton setAutoHeight" (click)="activateAllEventsFilter()">All Events</button>
    <button class="yellowButton setAutoHeight" (click)="activateFavoritedClubEventsFilter()" [disabled]="!userID">Favorited Club Events</button>
    <button class="yellowButton setAutoHeight" (click)="activateRSVPFilter()" [disabled]="!userID">RSVP'd Events</button>
  </div>
  <div class="filterFlex">
    <div class="dropdownContentSize">
      <p-dropdown [options]="dropdownOptions" [filter]="true" optionLabel="clubName" [ngClass]="{'calendarDropdown': responsiveService.deviceDesktop() || responsiveService.deviceTablet(), 'calendarDropdownMobile': responsiveService.deviceMobile()}" placeholder="Filter by Club" (onChange)="activateClubFilter($event)" [style]="{'border':'2px solid #0667B3', 'border-radius':'10px'}"></p-dropdown>
    </div>

    <!--    Deprecated as of right now-->

    <!--<h3 class="blueHeaders">Filter by Location</h3>
    <div class="dropdownContentSize">
      <p-dropdown  [(ngModel)]="locationID" [options]="locationsList" [filter]="true" [autoDisplayFirst]="false" appendTo="body" [ngClass]="{'calendarDropdown': responsiveService.deviceDesktop() || responsiveService.deviceTablet(), 'calendarDropdownMobile': responsiveService.deviceMobile()}" optionValue="location_ID" optionLabel="locationName" placeholder="Select Location" (onChange)="checkLocationSelected()" [style]="{'border':'2px solid #0667B3', 'border-radius':'10px'}"></p-dropdown>
    </div>
    <div class="dropdownContentSize">
      <p-dropdown [(ngModel)]="spaceID" [options]="spacesList" [filter]="true" [autoDisplayFirst]="false" appendTo="body" [ngClass]="{'calendarDropdown': responsiveService.deviceDesktop() || responsiveService.deviceTablet(), 'calendarDropdownMobile': responsiveService.deviceMobile()}" [disabled]="disableSpaceDropdown" optionValue="space_ID" optionLabel="spaceName" placeholder="Select Space" (onChange)="activateSpaceFilter()" [style]="{'border':'2px solid #0667B3', 'border-radius':'10px'}"></p-dropdown>
    </div>-->
  </div>

  <full-calendar [options]="options"></full-calendar>
</ng-template>

<p-dialog [(visible)]="viewFilterDialog" [breakpoints]="{'1080px': '80vw', '600px' : '100vw', '400px': '120vw'}" [style]="{width: '35vw'}" [modal]="true" [dismissableMask]="true"  [baseZIndex]="10000" (onHide)="closeViewFilterDialog()">
  <div class="text-center dialogContainer">
    <h1 class="blueHeaders">Filter Calendar</h1>
    <hr>
    <div class="filterSection">
      <button class="yellowButton" (click)="activateAllEventsFilter()">Show All Events</button>
    </div>
    <hr>
    <div class="filterSection">
      <button class="yellowButton" (click)="activateFavoritedClubEventsFilter()" [disabled]="!userID">Show Favorited Club Events</button>
    </div>
    <hr>
    <div class="filterSection">
      <h3 class="blueHeaders">Filter by Club</h3>
      <div class="dropdownContentSize">
        <p-dropdown [options]="dropdownOptions" [filter]="true" optionLabel="clubName" [ngClass]="{'calendarDropdown': responsiveService.deviceDesktop() || responsiveService.deviceTablet(), 'calendarDropdownMobile': responsiveService.deviceMobile()}" placeholder="Select a Club to View Events" (onChange)="activateClubFilter($event)" [style]="{'border':'2px solid #0667B3', 'border-radius':'10px'}"></p-dropdown>
      </div>
    </div>
    <hr>
    <div class="filterSection">
      <div class="filterByLocation">
        <h3 class="blueHeaders">Filter by Location</h3>
        <div class="dropdownContentSize">
          <p-dropdown  [(ngModel)]="locationID" [options]="locationsList" [filter]="true" [autoDisplayFirst]="false" appendTo="body" [ngClass]="{'calendarDropdown': responsiveService.deviceDesktop() || responsiveService.deviceTablet(), 'calendarDropdownMobile': responsiveService.deviceMobile()}" optionValue="location_ID" optionLabel="locationName" placeholder="Select Location" (onChange)="checkLocationSelected()" [style]="{'border':'2px solid #0667B3', 'border-radius':'10px'}"></p-dropdown>
        </div>
        <div class="dropdownContentSize">
          <p-dropdown [(ngModel)]="spaceID" [options]="spacesList" [filter]="true" [autoDisplayFirst]="false" appendTo="body" [ngClass]="{'calendarDropdown': responsiveService.deviceDesktop() || responsiveService.deviceTablet(), 'calendarDropdownMobile': responsiveService.deviceMobile()}" [disabled]="disableSpaceDropdown" optionValue="space_ID" optionLabel="spaceName" placeholder="Select Space" (onChange)="activateSpaceFilter()" [style]="{'border':'2px solid #0667B3', 'border-radius':'10px'}"></p-dropdown>
        </div>
      </div>
    </div>
    <hr>
    <div class="text-center marginButton">
      <button class="yellowButton" (click)="closeViewFilterDialog()">Close</button>
    </div>
  </div>
</p-dialog>

<p-dialog [(visible)]="viewMoreInfoDialog" [breakpoints]="{'1080px': '80vw', '600px' : '100vw', '400px': '120vw'}" [style]="{width: '35vw'}" [modal]="true" [dismissableMask]="true"  [baseZIndex]="10000" (onHide)="closeViewMoreInfoDialog()">
  <div class="eventCardDialog text-center" *ngFor="let event of selectedEvent">
    <div class="eventCardPicture">
        <div class="imageCenter">
          <img class="eventImage" [src]="event.clubLogo" alt="{{event.clubName}} Logo"/>
        </div>
        <div class="imageMaskDialog"></div>
      <h3 class="blueHeaders text-center setMargin" [innerHTML]="event.title"></h3>
      <h5 class="eventClubName setMargin" (click)="goToClubPage(event.clubID)" [innerHTML]="event.clubName"></h5>

      <div class="eventInformationDialogContainer">
        <div class="eventDateDialog">
          <h3 class="blueHeaders text-center">Date</h3>
          <p>{{event.dateTimeFormatted | date:'MMMM dd, YYYY'}}</p>
        </div>
        <div class="eventTimeDialog">
          <h3 class="blueHeaders text-center">Time</h3>
          <p>{{event.startDateTime | timeFormat}} - {{event.endDateTime | timeFormat}}</p>
        </div>
        <div class="eventTransportationDialog">
          <h3 class="blueHeaders text-center">Transportation</h3>
          <ng-container *ngIf="event.isTransportation; else noTransportation">
            <p>Transportation Provided</p>
          </ng-container>
          <ng-template #noTransportation>
            <p>Transportation NOT Provided</p>
          </ng-template>
        </div>
        <div class="eventTicketLinkDialog">
          <h3 class="blueHeaders text-center">Ticket Link</h3>
          <ng-container *ngIf="event.ticketLink !== null && event.ticketLink !== ''; else noTicketLink">
            <p>{{event.ticketLink}}</p>
          </ng-container>
          <ng-template #noTicketLink>
            <p>N/A</p>
          </ng-template>
        </div>
        <div class="eventDescriptionDialog">
          <h3 class="blueHeaders text-center">Description</h3>
          <div class="descriptionStyling" [innerHTML]="event.description"></div>
        </div>
        <div class="eventLocationDialog">
          <h3 class="blueHeaders text-center">Location</h3>
          <p [innerHTML]="event.location"></p>
        </div>
      </div>
      <ng-container *ngIf="isLoggedIn">
        <ng-container *ngIf="isUserRSVPd(event.eventID) === true; else ShowRSVP">
          <button class="yellowButton" (click)=" $event.preventDefault(); $event.stopPropagation(); removeEventRSVP(event.eventID)">Remove RSVP</button>
        </ng-container>
        <ng-template #ShowRSVP>
          <button class="yellowButton" (click)=" $event.preventDefault(); $event.stopPropagation(); eventRSVP(event.eventID)">RSVP</button>
        </ng-template>
      </ng-container>
      <button class="yellowButton" (click)="closeViewMoreInfoDialog()">Close</button>
    </div>
  </div>
</p-dialog>
