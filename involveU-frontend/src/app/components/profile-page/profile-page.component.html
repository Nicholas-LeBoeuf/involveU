<ng-container *ngIf="isLoggedIn === false; else UserIsLoggedIn">
  <h1 class="text-center">You must be <b>Logged In</b> to view this page!</h1>
</ng-container>

<ng-template #UserIsLoggedIn>
<div class="blueTitleBar">
  <div class="text-center">
    <ng-template [ngIf]="this.cookie.get('studentFName') != ''">
      <h1 class="yellow-text profile-title">{{this.currentUser.firstName}}'s Profile!</h1>
        <p-dialog header="Settings" class="styling-dialog"
                  [(visible)]="viewSettingsDialog"
                  [modal]="true"
                  [dismissableMask]="true"
                  (onHide)="closeSettingsDialog()"
                  [style]="{width: '50vw', height: '75vh'}">
          <div class="settings-dialog">
              <div class="dialog-header">
                <i class="fa fa-close padding-x" (click)="closeSettingsDialog()"></i>
                <h2 class="blueHeaders settings-padding">Account Settings</h2>
              </div>
              <div class="settings-container">
                <label class="pronoun-label blueHeaders">Pronouns:</label>
                <p-dropdown [options]="pronouns"
                            (onChange)="updatePronouns($event)"
                            placeholder="Select Your Pronouns"
                            [style]="{ width: '450px' }">
                </p-dropdown>
                <label class="major-label blueHeaders">Major:</label>
                <p-dropdown [options]="majors" (onChange)="updateUserMajor($event.value)"
                            placeholder="Select Your Major" [style]="{ width: '450px' }">
                </p-dropdown>
                <label class="bio-label blueHeaders">Bio:</label>
                <div class="input-bio">
                  <textarea
                    pInputTextarea id="bio" placeholder="Tell us about yourself..."
                    [(ngModel)]="userProfileInfo.userBio"
                    (blur)="updateUserBio(userProfileInfo.userBio)"
                    [style]="{ width: '450px', height: '160px'}">
                  </textarea>
                </div>

                <div class="padding-bio-input"></div>
                  <button class="blueButton" (click)="openViewChangePasswordDialog()">Change Password</button>
              </div>
          </div>
        </p-dialog>
      <p-dialog header="Change Password"
                [(visible)]="viewChangePasswordDialog" [modal]="true"
                (onHide)="closeViewChangePasswordDialog()"
                [style]="{width: '50vw', height: '75vh'}"
                [dismissableMask]="true">
        <div class="password-dialog">
          <div class="dialog-header">
            <i class="fa fa-close padding-x" (click)="closeViewChangePasswordDialog()"></i>
            <h2 class="blueHeaders settings-padding">Change Password</h2>
          </div>
          <div class="password-container">
            <div class="input-pass-container">
            <label class="blueHeaders current-label">Current Password:</label>
            <input pInputText id="currentPass" placeholder="Current Password" [style]="{ width: '450px' }"/>
            <label class="blueHeaders new-label">New Password:</label>
            <input pInputText id="newPass" placeholder="New Password" [style]="{ width: '450px' }"/>
            <label class="blueHeaders confirm-label">Confirm New Password:</label>
            <input pInputText id="confirmPass" placeholder="Confirm Password" [style]="{ width: '450px' }"/>
            <div class="update-password">
              <button class="blueButton">Update Password</button>
            </div>
            </div>
          </div>
        </div>
      </p-dialog>
    </ng-template>
  </div>
</div>

  <div class="layout-container">
    <div class="sidebar-container">
      <div class="settings-icon-container">
        <i class="fa fa-cog" id="settingsIcon" (click)="openSettingsDialog()"></i>
      </div>
    <div class="profile-picture-container">
      <input type="file" id="pfp" name="pfp" accept="image/*" (change)="onFileSelected($event)"
           style="display: none;">
      <label for="pfp" class="profile-picture-label">
        <img [src]="userProfileImageUrl || 'assets/account.svg'" alt="Profile Picture" id="profilePic" />
      </label>
      <div *ngIf="fileInputLabel !== 'Choose File'">{{ fileInputLabel }}</div>
    </div>


  <div class="name-pronouns-info">
    <h2 class="name-display text-center">
      {{this.userProfileInfo.firstName}} {{this.userProfileInfo.lastName}}
      <span class="p-display pronouns"> {{this.userProfileInfo.pronouns}}</span>
    </h2>
  </div>
      <div class="year-major">
        <h2 class="year-major-display">{{ userProfileInfo.year }} | {{ userProfileInfo.userMajor }}</h2>
      </div>
  <div class="email">
    <h2 class="email-display">{{this.userProfileInfo.email}}</h2>
  </div>

      <div class="bio-card">
        <h2 class="bio-title yellow-text">About Me:</h2>
        <h2 class="bio-card-content">{{ userProfileInfo.userBio }}</h2>
      </div>

</div>

    <!--<div>
      <h2 class="blueHeaders rsvp-padding">RSVP'd Events</h2>
      <ng-container *ngIf="userRSVPdEvents.length === 0; else RSVPEventsPresent">
        <div class="noContent">
          <h3>There are no events that you are RSVP'd to!</h3>
        </div>
      </ng-container>-->

      <!--<ng-template #RSVPEventsPresent>
        <p-table [value]="userRSVPdEvents" styleClass="centerItems" [paginator]="true" [pageLinks]="3" [rows]="numberOfRows" [loading]="isLoading">
          <ng-template pTemplate="body" let-RSVPEvent>
            <div class="eventCard text-center" (click)="showViewMoreInfoDialog(RSVPEvent)" [ngClass]="{'eventCardSizeWeb' : responsiveService.deviceDesktop(), 'eventCardSizeTabletMobile' : responsiveService.deviceMobile() || responsiveService.deviceTablet()}">
              <div class="eventCardPicture">
                <div class="imageCenter">
                  <img class="eventImage" [src]="RSVPEvent.clubLogo" alt="{{RSVPEvent.clubName}} Logo"/>
                </div>
                <div class="imageMaskEvent"></div>
                <h3 class="blueHeaders text-center" [innerHTML]="RSVPEvent.title"></h3>
                <h5 class="eventClubName" (click)="goToClubPage(RSVPEvent.clubID)" [innerHTML]="RSVPEvent.clubName"></h5>
                <p>Date: {{RSVPEvent.dateTimeFormatted | date:'MMMM dd, YYYY'}}</p>
                <p>Time: {{RSVPEvent.startDateTime | timeFormat}} - {{RSVPEvent.endDateTime | timeFormat}}</p>
                <p [innerHTML]="'Location: ' + RSVPEvent.location"></p>

                <button class="blueButton" (click)=" $event.preventDefault(); $event.stopPropagation(); removeEventRSVP(RSVPEvent.eventID)">Remove RSVP</button>

              </div>
            </div>
          </ng-template>
        </p-table>
      </ng-template>
    </div>
  </div> -->


    <div class="main-content">
      <div *ngIf="userID !== 0;">
        <h2 class="blueHeaders club-title-padding">Favorite Clubs</h2>
        <ng-container *ngIf="favoritedClubs.length !== 0; else NoFavoritedClubs">
        <p-table styleClass="favoritedClubsTable" [value]="favoritedClubs" responsiveLayout="scroll">
          <ng-template pTemplate="header">
            <tr>
              <th class="text-center">Club</th>
              <th class="text-center">View Club</th>
              <th class="text-center">Unfavorite Club</th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-club>
            <tr>
              <td class="text-center" [innerHTML]="club.clubName"></td>
              <td class="text-center"><button class="blueButton" (click)="goToClubPage(club.clubID)">View</button></td>
              <td class="text-center"><button class="blueButton" (click)="removeFromFavorites(club.clubID)">Unfavorite</button></td>
            </tr>
          </ng-template>
        </p-table>
      </ng-container>
      <ng-template #NoFavoritedClubs>
        <h3 class="club-title-padding">You currently have no favorited clubs to show!</h3>
      </ng-template>
  </div>
  </div>
  </div>
</ng-template>

